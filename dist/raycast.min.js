var raycast=function(t){function e(r){if(o[r])return o[r].exports;var n=o[r]={exports:{},id:r,loaded:!1};return t[r].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var o={};return e.m=t,e.c=o,e.p="/dist",e(0)}([function(t,e,o){t.exports=o(1)},function(t,e,o){"use strict";var r=o(2),n=o(4),a=o(5),u=o(6),s=0,i=n.Level01,c=document.getElementById("canvas"),l=c.getContext("2d"),f=document.getElementById("textures"),d=64,h=null,M=null,v=null;document.onkeypress=function(t){t=t||window.event,M=t.keyCode},document.onkeydown=function(t){t=t||window.event,h=t.keyCode},document.onkeyup=function(t){t=t||window.event,v=t.keyCode};var y=function(){h=null,M=null,v=null};s=1;var p=1e3/30,m=a.createActor(i.start[0],i.start[1]),w=function(){switch(console.log("."),h){case 37:m.rot-=Math.PI/12;break;case 39:m.rot+=Math.PI/12;break;case 38:var t=Math.cos(m.rot)*m.speed,e=Math.sin(m.rot)*m.speed;0===i.map[Math.floor(m.y+e)][Math.floor(m.x+t)]&&(m.x+=t,m.y+=e)}var o=r.castRays(i.map,m.x,m.y,m.rot,function(t,e){return 0===i.map[t][e]});u.renderBackground(l,256,300),u.renderRays(f,d,l,256,300,i.map,o),y(),setTimeout(w,p)};s=2,w()},function(t,e,o){"use strict";var r=o(3);e.defaultConfig={rayCount:256,fov:Math.PI/2,fisheye:!1,center:!0},e.castRay=function(t,e,o,n,a){for(var u=Math.sin(a),s=Math.cos(a),i=r.getQuadrant(a),c=Math.floor(e),l=Math.floor(o),f=u/s,d=s/u,h=2&i?1:-1,M=h*f,v=1&i?-1:1,y=v*d,p=2&i?Math.ceil(e):c,m=o+(p-e)*f,w=1&i?l:Math.ceil(o),g=e+(w-o)*d,x=Math.sqrt(Math.pow(p-e,2)+Math.pow(m-o,2)),k=Math.sqrt(Math.pow(g-e,2)+Math.pow(w-o,2)),I=Math.sqrt(Math.pow(h,2)+Math.pow(M,2)),C=Math.sqrt(Math.pow(y,2)+Math.pow(v,2)),P=x<k?0:1,R=x<k?x:k,b=0;n(l,c,t[l][c],R,b);)x<k?(x+=I,p+=h,m+=M,c+=h,R=x,P=0):(k+=C,g+=y,w+=v,l+=v,R=k,P=1),b++;return{dist:0===P?x-I:k-C,side:P,x:1===P?g-y:p-h,y:1===P?w-v:m-M,rot:a,row:l,column:c}},e.castRays=function(t,o,n,a,u,s){void 0===s&&(s=e.defaultConfig);var i=function(a){return e.castRay(t,o,n,u,r.normalizeAngle(a))},c=s.fov/s.rayCount,l=s.center?a-s.fov/2:a-s.fov/2,f=[],d=0;if(s.fisheye)for(;d<s.rayCount;)f.push(i(d*c+l)),d++;else for(;d<s.rayCount;)f.push(r.removeFisheye(i(d*c+l),a)),d++;return f}},function(t,e){"use strict";var o=2*Math.PI,r=.5*Math.PI,n=.75*o;e.getQuadrant=function(t){var e=t<0||t>Math.PI?1:4;return t>n||t<r?2|e:8|e},e.normalizeAngle=function(t){var e=t%o;return e<0?o+e:e},e.removeFisheye=function(t,e){return t.dist=t.dist*Math.cos(e-t.rot),t}},function(t,e){"use strict";e.Level01={map:[[1,2,2,4,4,4,1,1,1,1,1,1],[1,0,0,0,0,4,0,0,0,0,0,3],[2,0,0,0,0,2,0,0,0,0,0,3],[1,0,0,0,0,1,4,2,1,0,0,3],[2,0,0,0,0,0,0,0,0,0,0,3],[1,0,0,0,0,0,0,0,0,0,0,3],[1,2,0,0,1,2,0,0,1,1,0,3],[1,0,0,0,0,0,0,0,0,0,0,3],[1,0,0,0,0,0,0,0,0,0,0,3],[1,0,0,0,0,1,4,4,1,0,0,3],[1,0,0,0,0,2,0,0,0,0,0,3],[1,0,0,0,0,1,0,0,0,0,0,3],[1,1,2,1,2,1,1,1,1,1,1,1]],start:[3.5,3.5]},Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.Level01},function(t,e){"use strict";e.createActor=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),{x:t,y:e,rot:.1,rotSpeed:Math.PI/12,height:80,speed:.5,state:0}}},function(t,e){"use strict";e.renderBackground=function(t,e,o){var r=Math.floor(o/2);t.fillStyle="black",t.fillRect(0,0,e,r),t.fillStyle="grey",t.fillRect(0,r,e,r)},e.renderRays=function(t,e,o,r,n,a,u){var s=Math.floor(n/2);u.forEach(function(r,n){var u=a[r.row][r.column];r.side?o.drawImage(t,(r.x-Math.floor(r.x))*e,u*e-e,1,e,n,s-80/r.dist,1,2*(80/r.dist)):o.drawImage(t,(r.y-Math.floor(r.y))*e,u*e-e,1,e,n,s-80/r.dist,1,2*(80/r.dist))})}}]);